var jsPsychSurveyMultiChoice=function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?o:String(o)),i)}var n,o}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var o={name:"survey-multi-choice",parameters:{questions:{type:e.ParameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:e.ParameterType.HTML_STRING,pretty_name:"Prompt",default:void 0},options:{type:e.ParameterType.STRING,pretty_name:"Options",array:!0,default:void 0},required:{type:e.ParameterType.BOOL,pretty_name:"Required",default:!1},horizontal:{type:e.ParameterType.BOOL,pretty_name:"Horizontal",default:!1},name:{type:e.ParameterType.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:e.ParameterType.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:e.ParameterType.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:e.ParameterType.STRING,pretty_name:"Button label",default:"Continue"},autocomplete:{type:e.ParameterType.BOOL,pretty_name:"Allow autocomplete",default:!1}}},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var n,o,a;return n=e,(o=[{key:"trial",value:function(e,t){var r=this,i="jspsych-survey-multi-choice",n="";n+='<style id="jspsych-survey-multi-choice-css">',n+=".jspsych-survey-multi-choice-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-choice-text span.required {color: darkred;}.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-text {  text-align: center;}.jspsych-survey-multi-choice-option { line-height: 2; }.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-choice-text input[type='radio'] {margin-right: 1em;}",n+="</style>",null!==t.preamble&&(n+='<div id="jspsych-survey-multi-choice-preamble" class="jspsych-survey-multi-choice-preamble">'+t.preamble+"</div>"),t.autocomplete?n+='<form id="jspsych-survey-multi-choice-form">':n+='<form id="jspsych-survey-multi-choice-form" autocomplete="off">';for(var o=[],a=0;a<t.questions.length;a++)o.push(a);for(t.randomize_question_order&&(o=this.jsPsych.randomization.shuffle(o)),a=0;a<t.questions.length;a++){var s=t.questions[o[a]],u=o[a],l=["jspsych-survey-multi-choice-question"];s.horizontal&&l.push("jspsych-survey-multi-choice-horizontal"),n+='<div id="jspsych-survey-multi-choice-'+u+'" class="'+l.join(" ")+'"  data-name="'+s.name+'">',n+='<p class="jspsych-survey-multi-choice-text survey-multi-choice">'+s.prompt,s.required&&(n+="<span class='required'>*</span>"),n+="</p>";for(var c=0;c<s.options.length;c++){var y="jspsych-survey-multi-choice-option-"+u+"-"+c,p="jspsych-survey-multi-choice-response-"+u,m="jspsych-survey-multi-choice-response-"+u+"-"+c,h=s.required?"required":"";n+='<div id="'+y+'" class="jspsych-survey-multi-choice-option">',n+='<label class="jspsych-survey-multi-choice-text" for="'+m+'">',n+='<input type="radio" name="'+p+'" id="'+m+'" value="'+s.options[c]+'" '+h+"></input>",n+=s.options[c]+"</label>",n+="</div>"}n+="</div>"}n+='<input type="submit" id="'+i+'-next" class="'+i+' jspsych-btn"'+(t.button_label?' value="'+t.button_label+'"':"")+"></input>",n+="</form>",e.innerHTML=n,document.querySelector("form").addEventListener("submit",(function(i){i.preventDefault();for(var n=performance.now(),a=Math.round(n-f),s={},u=0;u<t.questions.length;u++){var l,c=e.querySelector("#jspsych-survey-multi-choice-"+u),y="Q"+u;l=null!==c.querySelector("input[type=radio]:checked")?c.querySelector("input[type=radio]:checked").value:"";var p={},m=y;""!==c.attributes["data-name"].value&&(m=c.attributes["data-name"].value),p[m]=l,Object.assign(s,p)}var h={rt:a,response:s,question_order:o};e.innerHTML="",r.jsPsych.finishTrial(h)}));var f=performance.now()}},{key:"simulate",value:function(e,t,r,i){"data-only"==t&&(i(),this.simulate_data_only(e,r)),"visual"==t&&this.simulate_visual(e,r,i)}},{key:"create_simulation_data",value:function(e,t){var n,o={},a=1e3,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}(e.questions);try{for(s.s();!(n=s.n()).done;){var u=n.value;o[u.name?u.name:"Q".concat(e.questions.indexOf(u))]=this.jsPsych.randomization.sampleWithoutReplacement(u.options,1)[0],a+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}}catch(e){s.e(e)}finally{s.f()}var l={response:o,rt:a,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle(r(Array(e.questions.length).keys())):r(Array(e.questions.length).keys())},c=this.jsPsych.pluginAPI.mergeSimulationData(l,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,c),c}},{key:"simulate_data_only",value:function(e,t){var r=this.create_simulation_data(e,t);this.jsPsych.finishTrial(r)}},{key:"simulate_visual",value:function(e,t,r){var i=this.create_simulation_data(e,t),n=this.jsPsych.getDisplayElement();this.trial(n,e),r();for(var o=Object.entries(i.response),a=0;a<o.length;a++)this.jsPsych.pluginAPI.clickTarget(n.querySelector("#jspsych-survey-multi-choice-response-".concat(a,"-").concat(e.questions[a].options.indexOf(o[a][1]))),(i.rt-1e3)/o.length*(a+1));this.jsPsych.pluginAPI.clickTarget(n.querySelector("#jspsych-survey-multi-choice-next"),i.rt)}}])&&t(n.prototype,o),a&&t(n,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();return a.info=o,a}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3/dist/index.browser.min.js.map
